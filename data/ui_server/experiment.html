<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
	<link rel="stylesheet" type="text/css" href="style/main.css">
    <link rel="stylesheet" type="text/css" href="style/experiment.css">
    <script src="/js/jquery-2.1.4.min.js"></script>
    <script src="/js/jquery-ui.min.js"></script>
    <script src="/js/helpers.js"></script>
    <script src="/js/fixtures.js"></script>
    <script src="/js/scanners.js"></script>
    <script src="/js/experiment.js"></script>
    <script>
        current_fixture_id = "#current-fixture";
        current_scanner_id = "#current-scanner";

    </script>
	<title>Scan-o-Matic</title>
</head>
<body>
    <div id="cont">
        <h1>Start Experiment</h1>
        <form action="" method="post">

            <h2>Metadata</h2>
            <div class="section-frame">
                <table class="eventable">
                    <tr>
                        <td><label for="project-path">Project Path</label></td>
                        <td colspan="5"><input class='long' id="project-path" name="project-path" onchange="validate_experiment();" onfocus="set_experiment_root(this);"
                                onkeypress="set_experiment_root(this);"></td>
                    </tr>
                    <tr>
                        <td colspan="6"><div class="indented">
                            <em>The path is expressed relative to the experiments root.
                                The parent directory of the project directory must exist and
                                the project directory may not exist before experiment is launched.</em></div></td>
                    </tr>

                    <tr>
                        <td><label for="project-description">Description</label></td>
                        <td colspan="5"><textarea id="project-description" name="project-description" onchange="validate_experiment();"></textarea></td>
                    </tr>
                    <tr>
                        <td colspan="6"><div id="plate-descriptions" class="indented">
                            <em>Please, select a fixture and plate pinnings first.</em>
                        </div></td>
                    </tr>

                    <tr>
                        <td><label for="project-email">Contact email</label></td>
                        <td colspan="5"><input class='long' id="project-email" name="project-email" type="email"></td>
                    </tr>

                    <tr>
                        <td><label for="project-tag">Project tag</label></td>
                        <td><input size="4" id="project-tag" name="project-tag" onchange="format_tag(this); validate_experiment();"></td>
                        <td><label for="layout-tag">Layout tag</label></td>
                        <td><input size="4" id="layout-tag" name="layout-tag" onchange="format_tag(this); validate_experiment();"></td>
                        <td><label for="control-number">Verification number</label></td>
                        <td><input size="3" id="control-number" name="control-number"></td>
                    </tr>
                </table>
            </div>

            <h2>Scanner & Fixture</h2>

            <div class="section-frame">
                <table>
                    <tr>
                        <td><label for="current-scanner">Scanner:</label></td>
                        <td><select name="current-scanner" id="current-scanner" onchange="validate_experiment();"></select></td>
                    </tr>

                    <tr>
                        <td><label for="current-fixture">Fixture:</label></td>
                        <td><select name="current-fixtures" id="current-fixture" onchange="update_fixture(this); validate_experiment();"></select></td>
                    </tr>
                </table>
            </div>

            <h2>Time settings</h2>

            <div class="section-frame">
                <table>
                    <tr>
                        <td><label for="project-duration">Duration</label></td>
                        <td><input id="project-duration" name="project-duration" onchange="format_time(this); validate_experiment();"></td>
                    </tr>

                    <tr>
                        <td><label for="project-interval">Interval</label></td>
                        <td><input id="project-interval" name="project-interval" onchange="format_minutes(this);"></td>
                    </tr>
                </table>
            </div>

            <h2>Plate formats / pinning</h2>
            <div class="section-frame">
            <div id="pinnings" class="section">
                   <em>Please select a fixture first.</em>
            </div>
            </div>

            <div class="section">
                <button type="button" id="submit-button" onclick="">Start Scanning</button>
            </div>

        </form>
    </div>
    <script>
        format_time("#project-duration");
        format_minutes("#project-interval");
        set_experiment_root("#project-path");
        get_free_scanners(current_scanner_id);
        get_fixtures();
    </script>
</body>
</html>